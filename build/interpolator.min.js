!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(module.exports):"function"==typeof define&&define.amd?define(["exports"],a):a(window)}(function(a){function b(a){return/^\s*\w+\s*:/.test(a)}function c(a){return a.replace(/[_.-]([a-z])/gi,function(a,b){return b.toUpperCase()})}function d(a){var b=a.firstChild,c=b;for(e(a);b;)b=c.nextSibling,d(c),c=b;return 1===a.nodeType?a.innerHTML:void 0}function e(a){3===a.nodeType&&a.nodeValue&&f(a),1===a.nodeType&&a.attributes.length>0&&l(a)}function f(a){var b=g(a.nodeValue,h,i);if(a.parentNode&&(b.length>1||b[0]!==a)){for(var c=0;c<b.length;c++)a.parentNode.insertBefore(b[c],a);a.parentNode.removeChild(a)}}function g(a,b,c){for(var d,e,f,g=0,h=a.length,i=[];h>g;)d=a.indexOf(s.open,g),e=a.indexOf(s.close,d+s.open.length),-1!==d&&-1!==e?(g!==d&&i.push(c(a.substring(g,d))),f=a.substring(d+s.open.length,e),i=i.concat(b(f)),g=e+s.close.length):(g!==h&&i.push(c(a.substring(g))),g=h);return i}function h(a){var b=a.match(/^\s*(\w+)\s*:(.+)/),c=b&&b[1],d=[];if(c&&(q[c]||t[c])){var e=k(c,b[2]);d.push(p.createComment("ko "+e.name+":"+e.value)),e.autoClose?d.push(p.createComment("/ko")):o.push(a)}else if("/end"===a.trim()){if(0===o.length)throw new Error("Unexpected close tag");o.pop(),d.push(p.createComment("/ko"))}else d.push(p.createComment("ko text:"+n(a).trim()),p.createComment("/ko"));return d}function i(a){return p.createTextNode(a)}function j(a){return"'"+a.replace(/"/g,"\\'")+"'"}function k(a,b){var c=t["default"],d={name:a,value:""},e=t[a];"function"==typeof e?c=e:"object"==typeof e&&e&&(d.autoClose=e.autoClose,e.compile&&(c=e.compile),e.as&&(d.name=e.as));var f=c(b);return"string"==typeof f?d.value=f:"object"==typeof f&&(d.name=f.name,d.value=f.value),d.value=d.value.trim(),d}function l(a){for(var d,e,f,h=function(a){return a=a.split("|"),a[0]=a[0]+" | u",a=a.join("|"),n(a)},i=a.attributes,k=i.length-1;k>=0;--k){var l=i[k];l.specified&&l.name!=r&&l.value&&(e="",f=c(l.name),-1!==l.value.indexOf(s.open)&&-1!==l.value.indexOf(s.close)?(d=g(l.value,h,j),e=d.join("+")):(q[f]||t[f])&&(e=b(l.value)?l.value:n(l.value)),e&&(m(a,{name:f,value:e}),a.removeAttributeNode(l)))}}function m(a,b){var c=a.getAttribute(r),d=null;b=k(b.name,b.value);var e="'"+b.name+"':"+b.value;q[b.name]||(d=c?c.search(/attr\s*:\s*\{/):-1,-1===d?e="attr:{"+e+"}":(d+=RegExp.lastMatch.length,c=[c.substr(0,d),e,",",c.substr(d)].join(""))),c?null===d&&(c+=", "+e):c=e,a.setAttribute(r,c)}function n(a){if(-1===a.indexOf("|"))return a;var b=a.match(/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'|\|\||[|:]|[^\s|:"'][^|:"']*[^\s|:"']|[^\s|:"']/g);if(b&&b.length>1){b.push("|"),a=b[0];for(var c,d,d,e=!1,f=!1,g=1;d=b[g];++g)"|"===d?(e&&(":"===c&&(a+="undefined"),a+=")"),f=!0,e=!0):(f?a=u(d)+"("+a:e&&":"===d?(":"===c&&(a+="undefined"),a+=","):a+=d,f=!1),c=d}return a}var o,p,q,r="data-bind",s={open:"{{",close:"}}"},t={template:{autoClose:!0},partial:{autoClose:!0,as:"template",compile:function(a){var b=a.match(/^([^,]+)\s*,\s*(.*)$/);if(!b)throw new Error('Unable to compile "partial" binding: '+a);return b[2]&&(a=["{name:",b[1].trim(),",data:{",b[2].trim(),"}}"].join("")),a}},foreach:function(a){var b=a.split(/\s+in\s+/);return b.length>1?["{data:",b[1].trim(),",as:'",b[0].trim(),"'}"].join(""):a},"default":function(a){return b(a)?"{"+a+"}":a}},u=function(a){return a};a.interpolator={bindingSyntax:t,configure:function(a){return p=a.document,q=a.bindings,a.compileFilter&&(u=a.compileFilter),this},compile:function(a){if(!p||!q||!u)throw new Error(["Unable to compile html because of ",'one or more empty options "document", "bindingHandlers" or "compileFilter".'].join(""));o=[];var b=p.createElement("div");if("string"==typeof a)b.innerHTML=a;else{if(!a||!a.nodeType)throw new Error("Unable to parse specified hmtl: "+a);b.appendChild(a)}if(a=d(b),0!==o.length)throw new Error("Unclosed section: "+o.pop());return b.innerHTML="",a}}});