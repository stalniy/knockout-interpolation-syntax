!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(module.exports):"function"==typeof define&&define.amd?define(["exports"],a):a(window.mustached={})}(function(a){function b(a){return/^\s*\w+\s*:/.test(a)}function c(a){return a.replace(/[_.-]([a-z])/gi,function(a,b){return b.toUpperCase()})}function d(a){var b=a.firstChild,c=b;for(e(a);b;)b=c.nextSibling,d(c),c=b;return 1===a.nodeType?a.innerHTML:void 0}function e(a){3===a.nodeType&&a.nodeValue?f(a):1===a.nodeType&&a.attributes.length>0&&m(a)}function f(a){var b=g(a.nodeValue,h,i);if(a.parentNode&&(b.length>1||b[0]!==a)){for(var c=0;c<b.length;c++)a.parentNode.insertBefore(b[c],a);a.parentNode.removeChild(a)}}function g(a,b,c){for(var d,e,f,g=0,h=a.length,i=[];h>g;)d=a.indexOf(t.open,g),e=a.indexOf(t.close,d+t.open.length),-1!==d&&-1!==e?(g!==d&&i.push(c(a.substring(g,d))),f=a.substring(d+t.open.length,e),i=i.concat(b(f)),g=e+t.close.length):(g!==h&&i.push(c(a.substring(g))),g=h);return i}function h(a){a=a.trim();var b=[],c=a.match(/^(?:#([\w_-]+)\s+|([\w_-]+)\s*:)(.+)$/)||[],d=c[1]||c[2],e=q.createComment("/ko");if(d){var f=l(d,c[3]);b.push(q.createComment("ko "+f.name+":"+f.value)),f.autoClose?b.push(e):p.push(a)}else if("/end"===a){if(0===p.length)throw new Error("Unexpected close tag");p.pop(),b.push(e)}else b.push(q.createComment("ko text:"+o(a)),e);return b}function i(a){return q.createTextNode(a)}function j(a){return"'"+a.replace(/"/g,"\\'")+"'"}function k(a){var b=a.indexOf("|");return-1!==b?a=a.substr(0,b)+"|u"+a.substr(b):a+="|u",o(a)}function l(a,b){var c=u["default"],d={name:a,value:""},e=u[a];"function"==typeof e?c=e:"object"==typeof e&&e&&(d.autoClose=e.autoClose,e.compile&&(c=e.compile),e.as&&(d.name=e.as));var f=c(b);return"string"==typeof f?d.value=f:"object"==typeof f&&(d.name=f.name,d.value=f.value),d.value=o(d.value.trim()),d}function m(a){for(var b,d,e,f,h,i=a.attributes,l=i.length-1;l>=0;--l){var m=i[l];m.specified&&m.name!==s&&m.value&&(d="",e=m.name,f=-1!==e.indexOf("ko-"),f&&(e=e.substr(3)),f||-1===m.value.indexOf(t.open)||-1===m.value.indexOf(t.close)?(h=c(e),(f||r[h]||u[h])&&(f=!0,e=h,d=m.value)):(b=g(m.value,k,j),d=b.join("+")),d&&(n(a,{name:e,value:d,exists:f}),a.removeAttributeNode(m)))}}function n(a,b){var c=a.getAttribute(s),d=null,e=b.exists;b=l(b.name,b.value);var f="'"+b.name+"':"+b.value;e||(d=c?c.search(/attr\s*:\s*\{/):-1,-1===d?f="attr:{"+f+"}":(d+=RegExp.lastMatch.length,c=[c.substr(0,d),f,",",c.substr(d)].join(""))),c?null===d&&(c+=", "+f):c=f,a.setAttribute(s,c)}function o(a){if(-1===a.indexOf("|"))return a;var b=a.match(/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'|\|\||[|:]|[$\w_-]+|[^\s|:"']/g);if(b&&b.length>1){b.push(" "),a="";for(var c,d="",e=!1,f=0;c=b[f];++f)if("|"===c&&f!==b.length-1)e?d+=")":d=b[f-1]||"",e=!0;else if("|"===b[f-1])d=v(c)+"("+d;else if(e&&":"===c){var g=f;do d+=":"===b[g+1]?",null":","+b[++g];while(":"===b[++g]);f=g-1}else e?(e=!1,a+=d+")"+c,d=""):"|"!==b[f+1]&&(a+=c)}return a.trim()}var p,q,r,s="data-bind",t={open:"{{",close:"}}"},u={template:{autoClose:!0},partial:{autoClose:!0,as:"template",compile:function(a){var b=a.match(/^([^,]+)\s*,\s*(.*)$/);if(!b)throw new Error('Unable to compile "partial" binding: '+a);return b[2]&&(a=["{name:",b[1].trim(),",data:{",b[2].trim(),"}}"].join("")),a}},foreach:function(a){var b=a.split(/\s+in\s+/);return b.length>1?["{data:",b[1].trim(),",as:'",b[0].trim(),"'}"].join(""):a},"default":function(a){return b(a)?"{"+a+"}":a}},v=function(a){return a};a.interpolator={bindingSyntax:u,configure:function(a){return q=a.document,r=a.bindings,a.compileFilter&&(v=a.compileFilter),this},compile:function(a){if(!q||!v)throw new Error(["Unable to compile html because of ",'one or more empty options "document", or "compileFilter".'].join(""));p=[];var b=q.createElement("div");if("string"==typeof a)b.innerHTML=a;else{if(!a||!a.nodeType)throw new Error("Unable to parse specified hmtl: "+a);b.appendChild(a)}if(a=d(b),0!==p.length)throw new Error("Unclosed section: "+p.pop());return b.innerHTML="",a}}});