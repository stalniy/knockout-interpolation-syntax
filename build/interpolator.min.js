!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(module.exports):"function"==typeof define&&define.amd?define(["exports"],a):a(window.mustached={})}(function(a){function b(a){return/^\s*\w+\s*:/.test(a)}function c(a){return a.replace(/[_.-]([a-z])/gi,function(a,b){return b.toUpperCase()})}function d(a){var b=a.firstChild,c=b;for(e(a);b;)b=c.nextSibling,d(c),c=b;return 1===a.nodeType?a.innerHTML:void 0}function e(a){3===a.nodeType&&a.nodeValue&&f(a),1===a.nodeType&&a.attributes.length>0&&m(a)}function f(a){var b=g(a.nodeValue,h,i);if(a.parentNode&&(b.length>1||b[0]!==a)){for(var c=0;c<b.length;c++)a.parentNode.insertBefore(b[c],a);a.parentNode.removeChild(a)}}function g(a,b,c){for(var d,e,f,g=0,h=a.length,i=[];h>g;)d=a.indexOf(t.open,g),e=a.indexOf(t.close,d+t.open.length),-1!==d&&-1!==e?(g!==d&&i.push(c(a.substring(g,d))),f=a.substring(d+t.open.length,e),i=i.concat(b(f)),g=e+t.close.length):(g!==h&&i.push(c(a.substring(g))),g=h);return i}function h(a){var b=a.match(/^\s*([\w_-]+)\s*:(.+)$/),c=b&&b[1],d=[];if(c){var e=l(c,b[2]);d.push(q.createComment("ko "+e.name+":"+e.value)),e.autoClose?d.push(q.createComment("/ko")):p.push(a)}else if("/end"===a.trim()){if(0===p.length)throw new Error("Unexpected close tag");p.pop(),d.push(q.createComment("/ko"))}else d.push(q.createComment("ko text:"+o(a).trim()),q.createComment("/ko"));return d}function i(a){return q.createTextNode(a)}function j(a){return"'"+a.replace(/"/g,"\\'")+"'"}function k(a){return a=a.split("|"),a[0]=a[0]+" | u",a=a.join("|"),o(a)}function l(a,b){var c=u["default"],d={name:a,value:""},e=u[a];"function"==typeof e?c=e:"object"==typeof e&&e&&(d.autoClose=e.autoClose,e.compile&&(c=e.compile),e.as&&(d.name=e.as));var f=c(b);return"string"==typeof f?d.value=f:"object"==typeof f&&(d.name=f.name,d.value=f.value),d.value=d.value.trim(),d}function m(a){for(var d,e,f,h,i,l=a.attributes,m=l.length-1;m>=0;--m){var p=l[m];p.specified&&p.name!==s&&p.value&&(e="",f=p.name,h=-1!==f.indexOf("ko-"),h&&(f=f.substr(3)),h||-1===p.value.indexOf(t.open)||-1===p.value.indexOf(t.close)?(i=c(f),(h||r[i]||u[i])&&(h=!0,f=i,e=b(p.value)?p.value:o(p.value))):(d=g(p.value,k,j),e=d.join("+")),e&&(n(a,{name:f,value:e,exists:h}),a.removeAttributeNode(p)))}}function n(a,b){var c=a.getAttribute(s),d=null,e=b.exists;b=l(b.name,b.value);var f="'"+b.name+"':"+b.value;e||(d=c?c.search(/attr\s*:\s*\{/):-1,-1===d?f="attr:{"+f+"}":(d+=RegExp.lastMatch.length,c=[c.substr(0,d),f,",",c.substr(d)].join(""))),c?null===d&&(c+=", "+f):c=f,a.setAttribute(s,c)}function o(a){if(-1===a.indexOf("|"))return a;var b=a.match(/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'|\|\||[|:]|[^\s|:"'][^|:"']*[^\s|:"']|[^\s|:"']/g);if(b&&b.length>1){b.push("|"),a=b[0];for(var c,d,d,e=!1,f=!1,g=1;d=b[g];++g)"|"===d?(e&&(":"===c&&(a+="undefined"),a+=")"),f=!0,e=!0):(f?a=v(d)+"("+a:e&&":"===d?(":"===c&&(a+="undefined"),a+=","):a+=d,f=!1),c=d}return a}var p,q,r,s="data-bind",t={open:"{{",close:"}}"},u={template:{autoClose:!0},partial:{autoClose:!0,as:"template",compile:function(a){var b=a.match(/^([^,]+)\s*,\s*(.*)$/);if(!b)throw new Error('Unable to compile "partial" binding: '+a);return b[2]&&(a=["{name:",b[1].trim(),",data:{",b[2].trim(),"}}"].join("")),a}},foreach:function(a){var b=a.split(/\s+in\s+/);return b.length>1?["{data:",b[1].trim(),",as:'",b[0].trim(),"'}"].join(""):a},"default":function(a){return b(a)?"{"+a+"}":a}},v=function(a){return a};a.interpolator={bindingSyntax:u,configure:function(a){return q=a.document,r=a.bindings,a.compileFilter&&(v=a.compileFilter),this},compile:function(a){if(!q||!v)throw new Error(["Unable to compile html because of ",'one or more empty options "document", or "compileFilter".'].join(""));p=[];var b=q.createElement("div");if("string"==typeof a)b.innerHTML=a;else{if(!a||!a.nodeType)throw new Error("Unable to parse specified hmtl: "+a);b.appendChild(a)}if(a=d(b),0!==p.length)throw new Error("Unclosed section: "+p.pop());return b.innerHTML="",a}}});